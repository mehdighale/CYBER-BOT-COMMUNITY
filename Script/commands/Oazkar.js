const cron = require('node-cron');

const morningAzkar = [
  "أَصْبَحْنا وَأَصْبَحَ المُلْكُ للهِ وَالحَمْدُ للهِ لا إِلٰهَ إِلَّا اللهُ وَحدَهُ لا شَرِيكَ لهُ، لهُ المُلْكُ ولهُ الحَمْدُ وهوَ على كلِّ شيءٍ قدير.",
  "رَضيْتُ باللهِ رَبًا، وبالإسلامِ دينًا، وبمُحمدٍ صلى الله عليه وسلم نبيًا.",
  "اللّهُمَّ إني أسْأَلُكَ عِلْمًا نافعًا، ورِزْقًا طيّبًا، وعَمَلاً متقبّلاً.",
  "اللّهُمَّ بِكَ أَصْبَحْنا، وَبِكَ أَمْسَيْنا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ، وَإلَيْكَ النُّشُور.",
  "اللّهُمَّ اجْعَلْنَا مِنَ الَّذينَ يَسْتَمِعُونَ القَولَ فَيَتَّبِعُونَ أَحْسَنَهُ.",
  "اللّهُمَّ إني أعوذُ بِكَ منَ الكَسَلِ وَسوءِ الكِبَرِ، وأعوذُ بِكَ منْ عَذابِ القَبْرِ، لا إلهَ إلا أنتَ.",
  "سُبْحانَ اللهِ، وَالحَمْدُ للهِ، وَلا إلهَ إلا اللهُ، وَاللهُ أَكبر."
];

const eveningAzkar = [
  "أَمْسَيْنا وَأَمْسَى المُلكُ للهِ وَالحَمْدُ للهِ لا إِلٰهَ إِلَّا اللهُ وَحدَهُ لا شَرِيكَ لهُ، لهُ المُلْكُ ولهُ الحَمْدُ وهوَ على كلِّ شيءٍ قدير.",
  "اللّهُمَّ إني أسْأَلُكَ عِلْمًا نافعًا، ورِزْقًا طيّبًا، وعَمَلاً متقبّلاً.",
  "اللّهُمَّ أَنْتَ رَبِّي لا إِلٰهَ إِلَّا أَنْتَ، خَلَقْتَنِي وَأَنَا عَبْدُكَ، وَأَنَا عَلَى عَهْدِكَ وَوَعْدِكَ مَا اسْتَطَعْتُ.",
  "اللّهُمَّ اجْعَلْ لِي نُورًا في قَلْبِي، وَنُورًا في بَصَرِي، وَنُورًا في سَمْعِي، وَنُورًا في جِلْدِي، وَنُورًا في شَعْرِي، وَنُورًا في لَحْمِي، وَنُورًا في دَمِي، وَنُورًا في عِظَامِي.",
  "اللّهُمَّ اجْعَلْنِي مِنَ الَّذينَ لا خَوْفٌ عَلَيْهِم وَلا هُمْ يَحْزَنُونَ.",
  "سُبْحانَ اللهِ، وَالحَمْدُ للهِ، وَلا إلهَ إلا اللهُ، وَاللهُ أَكبر."
];

module.exports.config = {
  name: "اذكار",
  version: "1.0.0",
  hasPermssion: 0,
  credits: "يونو",
  description: "يرسل أذكار صباحية ومسائية تلقائياً",
  commandCategory: "خاص",
  usages: "اذكار",
  cooldowns: 5,
};

module.exports.run = async function({ api, event }) {
  return api.sendMessage("هذا الأمر مخصص للجدولة التلقائية ولا يرسل رسائل يدوياً.", event.threadID);
};

module.exports.onLoad = function({ api }) {
  const threadIDToSend = "24173245092282562"; // معرف المجموعة التي تريد الإرسال لها

  // أذكار الصباح - الساعة 07:00 بتوقيت الجزائر
  cron.schedule('0 7 * * *', async () => {
    for (const azkar of morningAzkar) {
      await api.sendMessage(azkar, threadIDToSend);
    }
  }, {
    timezone: "Africa/Algiers"
  });

  // أذكار المساء - الساعة 19:00 بتوقيت الجزائر
  cron.schedule('0 19 * * *', async () => {
    for (const azkar of eveningAzkar) {
      await api.sendMessage(azkar, threadIDToSend);
    }
  }, {
    timezone: "Africa/Algiers"
  });
};
